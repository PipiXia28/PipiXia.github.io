{"meta":{"title":"He's Blog","subtitle":"","description":"Life is short, have more fun.","author":"heqizheng","url":"http://example.com","root":"/"},"pages":[{"title":"关于","date":"2020-10-30T02:08:28.000Z","updated":"2020-10-30T07:35:31.769Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":""},{"title":"所有分类","date":"2020-10-30T02:07:11.000Z","updated":"2020-10-30T07:35:54.321Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"留言","date":"2020-10-30T02:07:55.000Z","updated":"2020-10-30T03:48:34.613Z","comments":true,"path":"comments/index.html","permalink":"http://example.com/comments/index.html","excerpt":"","text":""},{"title":"404 Not Found","date":"2020-10-30T07:47:34.708Z","updated":"2020-10-30T07:47:34.708Z","comments":true,"path":"404.html","permalink":"http://example.com/404.html","excerpt":"","text":"404 很抱歉，您访问的页面不存在 可能是输入地址有误或该地址已被删除"},{"title":"夏目友人帐","date":"2020-11-12T04:12:00.636Z","updated":"2020-11-12T04:12:00.636Z","comments":true,"path":"friends/index.html","permalink":"http://example.com/friends/index.html","excerpt":"","text":"申请要求 内容持续更新且可以稳定访问网页整洁无繁杂广告推广博客主页被百度或谷歌等搜索引擎收录"},{"title":"","date":"2020-11-09T05:52:37.214Z","updated":"2020-11-09T05:52:37.214Z","comments":true,"path":"friends/linklist.json","permalink":"http://example.com/friends/linklist.json","excerpt":"","text":"[{\"nickname\":\"小丁的个人博客\",\"avatar\":\"http://tding.top/images/avatar.webp\",\"site\":\"http://tding.top\",\"info\":\"世间所有的相遇，都是久别重逢\"},{\"nickname\":\"张的个人博客\",\"avatar\":\"http://www.zhangblog.com/uploads/avatar.png\",\"site\":\"http://www.zhangblog.com/\",\"info\":\"不止于技术，更记录人生点滴感悟\"},{\"nickname\":\"菜鸡坤的个人博客\",\"avatar\":\"https://nicolaskun.github.io/images/avatar.png\",\"site\":\"https://nicolaskun.github.io/\",\"info\":\"常走弯路,才会有更多支线剧情与奖励\"},{\"nickname\":\"Xu’s Blog\",\"avatar\":\"https://hasaik.com/images/avatar.jpg\",\"site\":\"https://hasaik.com\",\"info\":\"博观而约取，厚积而薄发！\"}]"},{"title":"所有标签","date":"2020-10-30T02:07:18.000Z","updated":"2020-10-30T07:36:11.479Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Mysql8.0修改密码端口,限制ip连接","slug":"Mysql8-0修改端口密码,限制连接","date":"2020-10-20T07:26:00.000Z","updated":"2020-11-04T02:40:22.788Z","comments":true,"path":"post/8f24.html","link":"","permalink":"http://example.com/post/8f24.html","excerpt":"之前在云服务器上装了一个Mysql自用，结果有一天登录发现数据库被黑了当初搭环境时想到没什么重要数据，端口和账号密码都是默认的，吃了亏之后决定对数据库连接进行限制","text":"之前在云服务器上装了一个Mysql自用，结果有一天登录发现数据库被黑了当初搭环境时想到没什么重要数据，端口和账号密码都是默认的，吃了亏之后决定对数据库连接进行限制 证据如下我连接上数据库时，发现所有库里的表都被删除,只剩下一张warning表，里面有下图的提示语，需要登录交钱的网站和对应的token当我把比特币汇率算了下钱，emmmmmmmmmm，可太看的起我了，服务器就才花了几十块钱，坚决不交，不能助长苗头(主要数据库里没啥重要数据)，于是痛下决心花点时间将数据库连接进行一下限制 修改端口12345678910111213141516171819202122232425262728#先连接数据库，输入密码登录[root@VM-0-4-centos &#x2F;]# mysql -uroot -pEnter password: #查看端口 默认为3306mysql&gt; show global variables like &#39;port&#39;;+---------------+-------+| Variable_name | Value |+---------------+-------+| port | 3306 |+---------------+-------+1 row in set (0.13 sec)#修改配置文件[root@VM-0-4-centos etc]# vim &#x2F;etc&#x2F;my.cnf[mysqld]#默认端口 port&#x3D;3306 datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysqlsocket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock#如果忘记了密码 可以加上下面这句 重启mysql即可免密码登录#skip-grant-tableslog-error&#x3D;&#x2F;var&#x2F;log&#x2F;mysqld.logpid-file&#x3D;&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid#重启mysql[root@VM-0-4-centos etc]# service mysqld restart 查看账号对应ip1234567891011121314151617181920[root@VM-0-4-centos &#x2F;]# mysql -uroot -pEnter password: mysql&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changed# 查询账号和对应的ipmysql&gt; select user,host from user;+------------------+-----------------+| user | host |+------------------+-----------------+| mysqlbackups | % || root | % || mysql.infoschema | localhost || mysql.session | localhost || mysql.sys | localhost || root | localhost |+------------------+-----------------+6 rows in set (0.00 sec) 可以看见root有一个localhost和%,%就代表ip没有限制可以任意连接，这当然不是我们想要的，接下来创建账号和对应的ip 创建账号12345678910111213141516171819202122#创建对应ip的账号mysql&gt; CREATE USER &#39;root&#39;@&#39;11.22.33.44&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;Query OK, 0 rows affected (0.06 sec)#刷新配置mysql&gt; flush privileges;Query OK, 0 rows affected (0.03 sec)mysql&gt; select user,host from user;+------------------+-----------------+| user | host |+------------------+-----------------+| mysqlbackups | % || root | % || root | 11.22.33.44 || mysql.infoschema | localhost || mysql.session | localhost || mysql.sys | localhost || root | localhost |+------------------+-----------------+7 rows in set (0.00 sec) 可以看见已经多了一个新的ip，记得查看自己的ip，加到配置中去，然后删除默认的% 删除ip对应的账号12345mysql&gt; drop user&#39;root&#39;@&#39;%&#39;;Query OK, 0 rows affected (0.08 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.03 sec) 修改账号权限1234567891011121314151617181920212223242526272829303132#查询权限mysql&gt; select user,host,grant_priv,super_priv from user;+------------------+-----------------+------------+------------+| user | host | grant_priv | super_priv |+------------------+-----------------+------------+------------+| mysqlbackups | % | N | N || root | 11.22.33.44 | N | N || mysql.infoschema | localhost | N | N || mysql.session | localhost | N | Y || mysql.sys | localhost | N | N || root | localhost | Y | Y |+------------------+-----------------+------------+------------+6 rows in set (0.00 sec)#将root账号对应的权限修改为yesmysql&gt; UPDATE mysql.user SET Grant_priv&#x3D;&#39;Y&#39;, Super_priv&#x3D;&#39;Y&#39; WHERE User&#x3D;&#39;root&#39;;Query OK, 1 row affected (0.08 sec)Rows matched: 8 Changed: 1 Warnings: 0#再次查询权限已经更新mysql&gt; select user,host,grant_priv,super_priv from user;+------------------+-----------------+------------+------------+| user | host | grant_priv | super_priv |+------------------+-----------------+------------+------------+| mysqlbackups | % | N | N || root | 11.22.33.44 | Y | Y || mysql.infoschema | localhost | N | N || mysql.session | localhost | N | Y || mysql.sys | localhost | N | N || root | localhost | Y | Y |+------------------+-----------------+------------+------------+6 rows in set (0.00 sec) 如果连接之后发现无法看见创建的数据库，只有一个数据库，如下 123456789101112mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema |+--------------------+5 rows in set (0.01 sec)#将对应数据库的权限加上mysql&gt; grant all privileges on databasename.* to &#39;root&#39;@&#39;11.22.33.44&#39;;mysql&gt; flush privileges; 修改密码12mysql&gt; ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;Query OK, 0 rows affected (0.07 sec) 改完之后重新退出登录即可 通过改端口和限制ip，修改密码，将数据库的安全性比以前提高了很多(在被黑当我没说)，希望大家引以为戒，☁️服务器的相关配置都要好好设置","categories":[{"name":"Mysql","slug":"Mysql","permalink":"http://example.com/categories/Mysql/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"http://example.com/tags/Mysql/"}],"author":"PipiXia28"},{"title":"hexo-pm2后台运行","slug":"hexo后台运行","date":"2020-10-08T04:17:00.000Z","updated":"2020-11-06T06:42:45.299Z","comments":true,"path":"post/67f5.html","link":"","permalink":"http://example.com/post/67f5.html","excerpt":"为什么需要pm2后台启动？从启动日志可以看到当ssh窗口关闭或者Ctrl+C时服务就会停止，我们需要安装pm2用于后台运行，当检测到hexo服务停止时会自动重启。","text":"为什么需要pm2后台启动？从启动日志可以看到当ssh窗口关闭或者Ctrl+C时服务就会停止，我们需要安装pm2用于后台运行，当检测到hexo服务停止时会自动重启。 123[root@VM-0-4-centos ~]# hexo sINFO Start processingINFO Hexo is running at http:&#x2F;&#x2F;localhost:4000 . Press Ctrl+C to stop. pm2安装1234# 安装pm2[root@VM-0-4-centos ~]# npm install -g pm2# 创建启动js[root@VM-0-4-centos hexo]# vi hexo-auto.js hexo-auto.js内容： 12345678var exec = require(&#x27;child_process&#x27;).exec;// gulp后面提升加载速度时用到，现在不需要// -p 8888 指定端口号，可以不加var cmd = &#x27;hexo clean &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; nohup hexo s -p 8888 &gt;&gt; server.log &amp;&#x27;;exec(cmd, function(error, stdout, stderr) &#123; process.exit(0);&#125;); pm2命令用于后台运行，正常测试的时候还是可以使用hexo的几个命令。 pm2常用命令12345# 启动[root@VM-0-4-centos hexo]# pm2 start hexo-auto.js [PM2] Applying action restartProcessId on app [hexo-auto](ids: [ 1 ])[PM2] [hexo-auto](1) ✓[PM2] Process successfully started 启动效果如下 1234# 关闭[root@VM-0-4-centos hexo]# pm2 stop hexo-auto.js [PM2] Applying action stopProcessId on app [hexo-auto.js](ids: [ 1 ])[PM2] [hexo-auto](1) ✓ 关闭效果如下需要注意，当想要杀掉hexo进程时，要先关闭pm2，否则hexo服务会重启。","categories":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"},{"name":"pm2","slug":"hexo/pm2","permalink":"http://example.com/categories/hexo/pm2/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"},{"name":"pm2","slug":"pm2","permalink":"http://example.com/tags/pm2/"},{"name":"next","slug":"next","permalink":"http://example.com/tags/next/"}],"author":"PipiXia28"},{"title":"IDEA创建SpringBoot项目报connect timed out解决方案","slug":"IDEA创建SpringBoot项目报connect-timed-out解决方案","date":"2020-10-04T08:08:00.000Z","updated":"2020-11-04T02:40:22.787Z","comments":true,"path":"post/ebe9.html","link":"","permalink":"http://example.com/post/ebe9.html","excerpt":"IDEA用默认的https://start.spring.io路径创建SpringBoot项目时由于网络或者其他原因导致连接超时Initialization failed for ‘https://start.spring.io&#39;Please check URL, network and proxy settings.Error message:Cannot download ‘https://start.spring.io&#39;: connect timed out","text":"IDEA用默认的https://start.spring.io路径创建SpringBoot项目时由于网络或者其他原因导致连接超时Initialization failed for ‘https://start.spring.io&#39;Please check URL, network and proxy settings.Error message:Cannot download ‘https://start.spring.io&#39;: connect timed out 解决方案切换网络如果电脑联接网络有问题的话，可以尝试连接自己的手机热点进行项目创建。这种方法我用台式机没有成功，但是用笔记本成功了，可以参考一下。 切换数据源(推荐)在创建时点击Custom，在输入框内输入https://start.aliyun.com/，如下图创建项目之后如果maven无法正常下载依赖，可以尝试在maven的settings.xml添加一下内容 123456&lt;mirror&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central&lt;/url&gt;&lt;/mirror&gt; 这样不管是创建项目还是下载依赖都在国内，速度比较快。","categories":[{"name":"IDEA","slug":"IDEA","permalink":"http://example.com/categories/IDEA/"},{"name":"SpringBoot","slug":"IDEA/SpringBoot","permalink":"http://example.com/categories/IDEA/SpringBoot/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"http://example.com/tags/IDEA/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://example.com/tags/SpringBoot/"}],"author":"PipiXia28"},{"title":"腾讯云服务器nginx配置ssl证书","slug":"腾讯云服务器Nginx配置SSL证书","date":"2020-10-01T03:45:00.000Z","updated":"2020-11-04T02:40:22.790Z","comments":true,"path":"post/bc30.html","link":"","permalink":"http://example.com/post/bc30.html","excerpt":"需要有一个备案的域名。当前服务器的操作系统为 CentOS 7，由于操作系统的版本不同，详细操作步骤略有区别。安装 SSL 证书前，请您在 Nginx 服务器上开启 “443” 端口，避免证书安装后无法启用 HTTPS。","text":"需要有一个备案的域名。当前服务器的操作系统为 CentOS 7，由于操作系统的版本不同，详细操作步骤略有区别。安装 SSL 证书前，请您在 Nginx 服务器上开启 “443” 端口，避免证书安装后无法启用 HTTPS。 验证是否开启443端口开启状态1234[root@VM-0-4-centos ~]# lsof -i:443COMMAND PID USER FD TYPE DEVICE SIZE&#x2F;OFF NODE NAMEnginx 1349 admin 17u IPv4 13661312 0t0 TCP *:https (LISTEN)nginx 2129 root 17u IPv4 13661312 0t0 TCP *:https (LISTEN) 未开启状态12[root@VM-0-4-centos ~]# lsof -i:443[root@VM-0-4-centos ~]# 申请SSL证书登陆控制台找到SSL证书 点击申请证书 同一主域最多只能申请20张亚洲诚信品牌免费型DV版SSL证书 有效期为1年 填写信息 确认申请 等待颁发下载一般几分钟就会颁发下来，然后点击下载就行。 解压 上传解压后有个Nginx的文件夹，里面有申请的对应域名的证书，将这两个文件上传到服务器安装Nginx的conf目录里。 1234[root@VM-0-4-centos ~]# cd &#x2F;home&#x2F;admin&#x2F;nginx&#x2F;conf&#x2F;[root@VM-0-4-centos conf]# ll-rw-r--r-- 1 root root 3747 Jul 12 20:12 1_blog.ppxhq.top_bundle.crt-rw-r--r-- 1 root root 1704 Jul 12 20:13 2_blog.ppxhq.top.key 配置Nginx修改conf123456789101112131415161718192021222324252627282930313233343536373839404142434445[root@VM-0-4-centos vhosts]# vim hexo.conf upstream hexo &#123; #服务器地址和对应的端口 server serverIP:port; &#125; server &#123; listen 443 ssl; server_name blog.ppxhq.top; access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;hexo.access.log; error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;hexo.error.log; #证书文件名称 ssl_certificate 1_blog.ppxhq.top_bundle.crt; #私钥文件名称 ssl_certificate_key 2_blog.ppxhq.top.key; ssl_session_timeout 5m; #请按照以下协议配置 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; proxy_buffers 16 64k; proxy_buffer_size 128k; location &#x2F; &#123; proxy_pass http:&#x2F;&#x2F;hexo&#x2F;; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_X_forwarded_for; proxy_set_header X-Forwarded-Proto http; &#125;&#125;server &#123;listen 80;#填写绑定证书的域名server_name blog.ppxhq.top;#把http的域名请求转成httpsreturn 301 https:&#x2F;&#x2F;$host$request_uri;&#125; 重启Nginx1[root@VM-0-4-centos vhosts]# ..&#x2F;sbin&#x2F;nginx -s reload 完工，接下来就可以用https请求服务了，http请求也可以自动转为https。","categories":[{"name":"Nginx","slug":"Nginx","permalink":"http://example.com/categories/Nginx/"},{"name":"SSL","slug":"Nginx/SSL","permalink":"http://example.com/categories/Nginx/SSL/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"http://example.com/tags/Nginx/"},{"name":"SSL","slug":"SSL","permalink":"http://example.com/tags/SSL/"}],"author":"PipiXia28"}],"categories":[{"name":"Mysql","slug":"Mysql","permalink":"http://example.com/categories/Mysql/"},{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"},{"name":"pm2","slug":"hexo/pm2","permalink":"http://example.com/categories/hexo/pm2/"},{"name":"IDEA","slug":"IDEA","permalink":"http://example.com/categories/IDEA/"},{"name":"SpringBoot","slug":"IDEA/SpringBoot","permalink":"http://example.com/categories/IDEA/SpringBoot/"},{"name":"Nginx","slug":"Nginx","permalink":"http://example.com/categories/Nginx/"},{"name":"SSL","slug":"Nginx/SSL","permalink":"http://example.com/categories/Nginx/SSL/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"http://example.com/tags/Mysql/"},{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"},{"name":"pm2","slug":"pm2","permalink":"http://example.com/tags/pm2/"},{"name":"next","slug":"next","permalink":"http://example.com/tags/next/"},{"name":"IDEA","slug":"IDEA","permalink":"http://example.com/tags/IDEA/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://example.com/tags/SpringBoot/"},{"name":"Nginx","slug":"Nginx","permalink":"http://example.com/tags/Nginx/"},{"name":"SSL","slug":"SSL","permalink":"http://example.com/tags/SSL/"}]}